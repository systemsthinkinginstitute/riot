/* Riot WIP, @license MIT */
var e,t;e=this,t=function(){"use strict";var y=[],p={},a="yield",b="__global_mixin",_="riot-",u=["ref","data-ref"],f="data-is",h="if",d="each",r="no-reorder",g="show",m="hide",i="key",w="__riot-events__",o="string",A="object",t="undefined",n="function",s="http://www.w3.org/1999/xlink",c="http://www.w3.org/2000/svg",l=/^xlink:(\w+)/,v=typeof window===t?void 0:window,x=/^on/,O=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,j={viewbox:"viewBox"},E=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,N=0|(v&&v.document||{}).documentMode;function C(e){return E.test(e)}function S(e){return typeof e===n}function T(e){return e&&typeof e===A}function k(e){return typeof e===t}function L(e){return typeof e===o}function I(e){return k(e)||null===e||""===e}function R(e){return Array.isArray(e)||e instanceof Array}function M(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return k(e[t])||r&&r.writable}var e=Object.freeze({isBoolAttr:C,isFunction:S,isObject:T,isUndefined:k,isString:L,isBlank:I,isArray:R,isWritable:M});function $(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function P(e,t){return(t||document).querySelector(e)}function F(){return document.createDocumentFragment()}function H(){return document.createTextNode("")}function z(e){return!!e.ownerSVGElement}function U(e){return"svg"===e?document.createElementNS(c,e):document.createElement(e)}function V(e,t){if(k(e.innerHTML)){var r=(new DOMParser).parseFromString(t,"application/xml"),n=e.ownerDocument.importNode(r.documentElement,!0);e.appendChild(n)}else e.innerHTML=t}function B(e,t){e.style.display=t?"":"none",e.hidden=!t}function q(e,t){e.removeAttribute(t)}function D(r){return Object.keys(r).reduce(function(e,t){return e+" "+t+": "+r[t]+";"},"")}function Z(e,t){return e.getAttribute(t)}function G(e,t,r){var n=l.exec(t);n&&n[1]?e.setAttributeNS(s,n[1],r):e.setAttribute(t,r)}function K(e,t,r){e.insertBefore(t,r.parentNode&&r)}function W(e,t){if(e)for(var r;r=O.exec(e);)t(r[1].toLowerCase(),r[2]||r[3]||r[4])}function J(e,t,r){if(e){var n,i=t(e,r);if(!1===i)return;for(e=e.firstChild;e;)n=e.nextSibling,J(e,t,i),e=n}}var Q,X,Y=Object.freeze({$$:$,$:P,createFrag:F,createDOMPlaceholder:H,isSvg:z,mkEl:U,setInnerHTML:V,toggleVisibility:B,remAttr:q,styleObjectToString:D,getAttr:Z,setAttr:G,safeInsert:K,walkAttrs:W,walkNodes:J}),ee={},te=[],re=!1;v&&(Q=function(){var e=U("style");G(e,"type","text/css");var t=P("style[type=riot]");return t?(t.id&&(e.id=t.id),t.parentNode.replaceChild(e,t)):document.getElementsByTagName("head")[0].appendChild(e),e}(),X=Q.styleSheet);var ne,ie,se,oe,ae={styleNode:Q,add:function(e,t){t?ee[t]=e:te.push(e),re=!0},inject:function(){if(v&&re){re=!1;var e=Object.keys(ee).map(function(e){return ee[e]}).concat(te).join("\n");X?X.cssText=e:Q.innerHTML=e}}},ue=(ie=(ne=["case","default","do","else","in","instanceof","prefix","return","typeof","void","yield"]).reduce(function(e,t){return e+t.slice(-1)},""),se=/^\/(?=[^*>/])[^[/\\]*(?:(?:\\.|\[(?:\\.|[^\]\\]*)*\])[^[\\/]*)*?\/[gimuy]*/,oe=/[$\w]/,function(e,t){var r=/.*/g,n=r.lastIndex=t++,i=r.exec(e)[0].match(se);if(i){var s=n+i[0].length,o=e[n=ce(e,n)];if(n<0||~"[{(,;:?=|&!^~>%*/".indexOf(o))return s;if("."===o)"."===e[n-1]&&(t=s);else if("+"===o||"-"===o)(e[--n]!==o||(n=ce(e,n))<0||!oe.test(e[n]))&&(t=s);else if(~ie.indexOf(o)){for(var a=n+1;0<=--n&&oe.test(e[n]););~ne.indexOf(e.slice(n+1,a))&&(t=s)}}return t});function ce(e,t){for(;0<=--t&&/\s/.test(e[t]););return t}var le,pe,fe,he,de,ge,me,ve,xe,ye,be,_e,we,Oe=(fe="g",de=(he=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g).source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?([^<]\/)[gim]*/.source,ge=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),me=/(?=[[\]()*+?.^$|])/g,ve=he.source+"|"+/(\/)(?![*\/])/.source,xe={"(":RegExp("([()])|"+ve,fe),"[":RegExp("([[\\]])|"+ve,fe),"{":RegExp("([{}])|"+ve,fe)},ye="{ }",be=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+ve,fe),ye,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],_e=void 0,we=[],Ce.split=function(n,i,t){var e,r,s,o,a,u,c=[],l=(t=t||we)[6],p=[],f="";for(r=s=l.lastIndex=0;e=l.exec(n);){if(u=l.lastIndex,o=e.index,r){if(e[2]){var h=e[2],d=xe[h],g=1;for(d.lastIndex=u;e=d.exec(n);)if(e[1]){if(e[1]===h)++g;else if(!--g)break}else d.lastIndex=v(e.index,d.lastIndex,e[2]);l.lastIndex=g?n.length:d.lastIndex;continue}if(!e[3]){l.lastIndex=v(o,u,e[4]);continue}}e[1]||(m(n.slice(s,o)),s=l.lastIndex,(l=t[6+(r^=1)]).lastIndex=s)}return n&&s<n.length&&m(n.slice(s)),c.qblocks=p,c;function m(e){f&&(e=f+e,f=""),i||r?c.push(e&&e.replace(t[5],"$1")):c.push(e)}function v(e,t,r){return r&&(t=ue(n,e)),i&&e+2<t&&(a="⁗"+p.length+"~",p.push(n.slice(e,t)),f+=n.slice(s,e)+a,s=t),t}},Ce.hasExpr=function(e){return we[4].test(e)},Ce.loopKeys=function(e){var t=e.match(we[9]);return t?{key:t[1],pos:t[2],val:we[0]+t[3].trim()+we[1]}:{val:e.trim()}},Ce.array=function(e){return e?Ne(e):we},Object.defineProperty(Ce,"settings",{set:function(e){var t;t=(e=e||{}).brackets,Object.defineProperty(e,"brackets",{set:Se,get:function(){return _e},enumerable:!0}),pe=e,Se(t)},get:function(){return pe}}),Ce.settings="undefined"!=typeof riot&&riot.settings||{},Ce.set=Se,Ce.skipRegex=ue,Ce.R_STRINGS=he,Ce.R_MLCOMMS=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,Ce.S_QBLOCKS=de,Ce.S_QBLOCK2=ve,Ce);function je(e){return e}function Ee(e,t){return t=t||we,new RegExp(e.source.replace(/{/g,t[2]).replace(/}/g,t[3]),e.global?fe:"")}function Ne(e){if(e===ye)return be;var t=e.split(" ");if(2!==t.length||ge.test(e))throw new Error('Unsupported brackets "'+e+'"');return(t=t.concat(e.replace(me,"\\").split(" ")))[4]=Ee(1<t[1].length?/{[\S\s]*?}/:be[4],t),t[5]=Ee(3<e.length?/\\({|})/g:be[5],t),t[6]=Ee(be[6],t),t[7]=RegExp("\\\\("+t[3]+")|([[({])|("+t[3]+")|"+ve,fe),t[8]=e,t}function Ce(e){return e instanceof RegExp?le(e):we[e]}function Se(e){(e=e||ye)!==we[8]&&(we=Ne(e),le=e===ye?je:Ee,we[9]=le(be[9])),_e=e}var Ae=function(){var r={};function n(e,t){return e?(r[e]||(r[e]=function(e){var t=function(e){var t,r=Oe.split(e.replace(a,'"'),1),n=r.qblocks;if(2<r.length||r[0]){var i,s,o=[];for(i=s=0;i<r.length;++i)(t=(t=r[i])&&(1&i?c(t,1,n):'"'+t.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"'))&&(o[s++]=t);t=s<2?o[0]:"["+o.join(",")+'].join("")'}else t=c(r[1],0,n);n.length&&(t=t.replace(u,function(e,t){return n[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")}));return t}(e);"try{return "!==t.slice(0,11)&&(t="return "+t);return new Function("E",t+";")}(e))).call(t,function(e,t){e.riotData={tagName:t&&t.__&&t.__.tagName,_riot_id:t&&t._riot_id},n.errorHandler?n.errorHandler(e):"undefined"!=typeof console&&"function"==typeof console.error&&(console.error(e.message),console.log("<%s> %s",e.riotData.tagName||"Unknown tag",this.tmpl),console.log(this.data))}.bind({data:t,tmpl:e})):e}n.hasExpr=Oe.hasExpr,n.loopKeys=Oe.loopKeys,n.clearCache=function(){r={}},n.errorHandler=null;var a=/\u2057/g,u=/\u2057(\d+)~/g;var l=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,p={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g};function c(s,e,t){if(s=s.replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var r,n=[],i=0;s&&(r=s.match(l))&&!r.index;){var o,a,u=/,|([[{(])|$/g;for(s=RegExp.rightContext,o=r[2]?t[r[2]].slice(1,-1).trim().replace(/\s+/g," "):r[1];a=(r=u.exec(s))[1];)c(a,u);a=s.slice(0,r.index),s=RegExp.rightContext,n[i++]=h(a,1,o)}s=i?1<i?"["+n.join(",")+'].join(" ").trim()':n[0]:h(s,e)}return s;function c(e,t){var r,n=1,i=p[e];for(i.lastIndex=t.lastIndex;r=i.exec(s);)if(r[0]===e)++n;else if(!--n)break;t.lastIndex=n?s.length:i.lastIndex}}var o='"in this?this:'+("object"!=typeof window?"global":"window")+").",i=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,f=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function h(e,t,r){var s;return e=e.replace(i,function(e,t,r,n,i){return r&&(n=s?0:n+e.length,"this"!==r&&"global"!==r&&"window"!==r?(e=t+'("'+r+o+r,n&&(s="."===(i=i[n])||"("===i||"["===i)):n&&(s=!f.test(i.slice(n)))),e}),s&&(e="try{return "+e+"}catch(e){E(e,this)}"),r?e=(s?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+r+'":""':t&&(e="function(v){"+(s?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'),e}return n.version=Oe.version="v3.0.8",n}(),Te=function(a){a=a||{};var u={},c=Array.prototype.slice;return Object.defineProperties(a,{on:{value:function(e,t){return"function"==typeof t&&(u[e]=u[e]||[]).push(t),a},enumerable:!1,writable:!1,configurable:!1},off:{value:function(e,t){if("*"!=e||t)if(t)for(var r,n=u[e],i=0;r=n&&n[i];++i)r==t&&n.splice(i--,1);else delete u[e];else u={};return a},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,r){return a.on(t,function e(){a.off(t,e),r.apply(a,arguments)})},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(e){var t,r,n,i=arguments,s=arguments.length-1,o=new Array(s);for(n=0;n<s;n++)o[n]=i[n+1];for(t=c.call(u[e]||[],0),n=0;r=t[n];++n)r.apply(a,o);return u["*"]&&"*"!=e&&a.trigger.apply(a,["*",e].concat(o)),a},enumerable:!1,writable:!1,configurable:!1}}),a};function ke(e,t){for(var r=e?e.length:0,n=0;n<r;++n)t(e[n],n);return e}function Le(e,t){return-1!==e.indexOf(t)}function Ie(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function Re(e,t){return e.slice(0,t.length)===t}function Me(e,t,r,n){return Object.defineProperty(e,t,$e({value:r,enumerable:!1,writable:!1,configurable:!0},n)),e}function $e(e){for(var t,r=arguments,n=1;n<r.length;++n)if(t=r[n])for(var i in t)M(e,i)&&(e[i]=t[i]);return e}var Pe=Object.freeze({each:ke,contains:Le,toCamel:Ie,startsWith:Re,defineProperty:Me,extend:$e}),Fe=$e(Object.create(Oe.settings),{skipAnonymousTags:!0,autoUpdate:!0});function He(e,t,r,n){var i,s=function(e,t,r){var n=this.__.parent,i=this.__.item;if(!i)for(;n&&!i;)i=n.__.item,n=n.__.parent;if(M(r,"currentTarget")&&(r.currentTarget=e),M(r,"target")&&(r.target=r.srcElement),M(r,"which")&&(r.which=r.charCode||r.keyCode),r.item=i,t.call(this,r),Fe.autoUpdate&&!r.preventUpdate){var s=Ot(this);s.isMounted&&s.update()}}.bind(n,r,t);r[e]=null,i=e.replace(x,""),Le(n.__.listeners,r)||n.__.listeners.push(r),r[w]||(r[w]={}),r[w][e]&&r.removeEventListener(i,r[w][e]),r[w][e]=s,r.addEventListener(i,s,!1)}function ze(e){if(!this.root||!Z(this.root,"virtualized")){var t,r,n,i=e.dom,s=function(e){return e?(e=e.replace(_,""),j[e]&&(e=j[e]),e):null}(e.attr),o=Le([g,m],s),a=e.root&&"VIRTUAL"===e.root.tagName,u=i&&(e.parent||i.parentNode),c="style"===s,l="class"===s;if(e._riot_id)e.__.wasCreated?e.update():(e.mount(),a&&At(e,e.root));else{if(e.update)return e.update();if(t=!I(n=Ae(e.expr,o?$e({},Object.create(this.parent),this):this)),(r=T(n))&&(r=!l&&!c,l?n=Ae(JSON.stringify(n),this):c&&(n=D(n))),!e.attr||e.isAttrRemoved&&t&&!1!==n||(q(i,e.attr),e.isAttrRemoved=!0),e.bool&&(n=!!n&&s),e.isRtag)return function(e,t,r){var n,i=e.tag||e.dom._tag,s=(i?i.__:{}).head,o="VIRTUAL"===e.dom.tagName;i&&e.tagName===r?i.update():(i&&(o&&(n=H(),s.parentNode.insertBefore(n,s)),i.unmount(!0)),L(r)&&(e.impl=p[r],e.impl&&(e.tag=i=wt(e.impl,{root:e.dom,parent:t,tagName:r},e.dom.innerHTML,t),ke(e.attrs,function(e){return G(i.root,e.name,e.value)}),e.tagName=r,i.mount(),o&&At(i,n||i.root),t.__.onUnmount=function(){var e=i.opts.dataIs;Ct(i.parent.tags,e,i),Ct(i.__.parent.tags,e,i),i.unmount()})))}(e,this,n);if((!e.wasParsedOnce||e.value!==n)&&(e.value=n,e.wasParsedOnce=!0,!r||o)){if(I(n)&&(n=""),!s)return n+="",void(u&&("TEXTAREA"===(e.parent=u).tagName?(u.value=n,N||(i.nodeValue=n)):i.nodeValue=n));S(n)?He(s,n,i,this):o?B(i,s===m?!n:n):(e.bool&&(i[s]=n),"value"===s&&i.value!==n?i.value=n:t&&!1!==n&&G(i,s,n),c&&i.hidden&&B(i,!1))}}}}function Ue(e){ke(e,ze.bind(this))}var Ve={init:function(e,t,r){q(e,h),this.tag=t,this.expr=r,this.stub=H();var n=(this.pristine=e).parentNode;return n.insertBefore(this.stub,e),n.removeChild(e),this},update:function(){this.value=Ae(this.expr,this.tag),this.value&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=[],Ge.apply(this.tag,[this.current,this.expressions,!0])):!this.value&&this.current&&(jt(this.expressions),this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current),this.current=null,this.expressions=[]),this.value&&Ue.call(this.tag,this.expressions)},unmount:function(){jt(this.expressions||[])}},Be={init:function(e,t,r,n){return this.dom=e,this.attr=r,this.rawValue=n,this.parent=t,this.hasExp=Ae.hasExpr(n),this},update:function(){var e=this.value,t=this.parent&&Ot(this.parent),r=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?Ae(this.rawValue,this.parent):this.rawValue,!I(e)&&t&&Ct(t.refs,e,r),!I(this.value)&&L(this.value)?(t&&Nt(t.refs,this.value,r,null,this.parent.__.index),this.value!==e&&G(this.dom,this.attr,this.value)):q(this.dom,this.attr),this.dom.__ref||(this.dom.__ref=r)},unmount:function(){var e=this.tag||this.dom,t=this.parent&&Ot(this.parent);!I(this.value)&&t&&Ct(t.refs,this.value,e)}};function qe(e,t,r,n){var i=n?Object.create(n):{};return i[e.key]=t,e.pos&&(i[e.pos]=r),i}function De(e,t){e.splice(t,1),this.unmount(),Ct(this.parent,this,this.__.tagName,!0)}function Ze(g,m,v){var x,y=typeof Z(g,r)!==o||q(g,r),b=Z(g,i),_=!!b&&Ae.hasExpr(b),w=Et(g),O=p[w],e=g.parentNode,t=H(),j=yt(g),n=Z(g,h),E=[],N=!p[w],C="VIRTUAL"===g.tagName,S=[];return q(g,d),q(g,i),(v=Ae.loopKeys(v)).isLoop=!0,n&&q(g,h),e.insertBefore(t,g),e.removeChild(g),v.update=function(){v.value=Ae(v.val,m);var p=v.value,f=F(),r=!R(p)&&!L(p),h=t.parentNode,d=[];h&&(r?p=(x=p||!1)?Object.keys(p).map(function(e){return qe(v,p[e],e)}):[]:x=!1,n&&(p=p.filter(function(e,t){return v.key&&!r?!!Ae(n,qe(v,e,t,m)):!!Ae(n,$e(Object.create(m),e))})),ke(p,function(e,t){var r=!x&&v.key?qe(v,e,t):e,n=function(e,t,r,n){return e?n?Ae(e,r):t[e]:t}(b,e,r,_),i=y&&typeof e===A&&!x,s=S.indexOf(n),o=-1===s,a=!o&&i?s:t,u=E[a],c=t>=S.length,l=i&&o||!i&&!u;l?((u=new xt(O,{parent:m,isLoop:!0,isAnonymous:N,tagName:w,root:g.cloneNode(N),item:r,index:t},g.innerHTML)).mount(),c?function(e,t){t?Tt.call(this,e):e.appendChild(this.root)}.apply(u,[f||h,C]):function(e,t,r){r?Tt.apply(this,[e,t]):K(e,this.root,t.root)}.apply(u,[h,E[t],C]),c||S.splice(t,0,r),E.splice(t,0,u),j&&Nt(m.tags,w,u,!0)):a!==t&&i&&((b||Le(p,S[a]))&&(function(e,t,r){r?kt.apply(this,[e,t]):K(e,this.root,t.root)}.apply(u,[h,E[t],C]),E.splice(t,0,E.splice(a,1)[0]),S.splice(t,0,S.splice(a,1)[0])),v.pos&&(u[v.pos]=t),!j&&u.tags&&function(t){var r=this;ke(Object.keys(this.tags),function(e){_t.apply(r.tags[e],[e,t])})}.call(u,t)),u.__.item=r,u.__.index=t,u.__.parent=m,d[t]=n,l||u.update(r)}),function(e,t){for(var r=t.length,n=e.length;n<r;)De.apply(t[--r],[t,r])}(p,E),S=d.slice(),h.insertBefore(f,t))},v.unmount=function(){ke(E,function(e){e.unmount()})},v}function Ge(c,e,l){var p=this;J(c,function(e,t){var r,n,i,s=e.nodeType,o=t.parent;if(!l&&e===c)return{parent:o};if(3===s&&"STYLE"!==e.parentNode.tagName&&Ae.hasExpr(e.nodeValue)&&o.children.push({dom:e,expr:e.nodeValue}),1!==s)return t;var a="VIRTUAL"===e.tagName;if(r=Z(e,d))return a&&G(e,"loopVirtual",!0),o.children.push(Ze(e,p,r)),!1;if(r=Z(e,h))return o.children.push(Object.create(Ve).init(e,p,r)),!1;if((n=Z(e,f))&&Ae.hasExpr(n))return o.children.push({isRtag:!0,expr:n,dom:e,attrs:[].slice.call(e.attributes)}),!1;if(i=yt(e),a&&(Z(e,"virtualized")&&e.parentElement.removeChild(e),i||Z(e,"virtualized")||Z(e,"loopVirtual")||(i={tmpl:e.outerHTML})),i&&(e!==c||l)){if(!a||Z(e,f))return o.children.push(wt(i,{root:e,parent:p},e.innerHTML,p)),!1;G(e,"virtualized",!0);var u=new xt({tmpl:e.outerHTML},{root:e,parent:p},e.innerHTML);o.children.push(u)}return Ke.apply(p,[e,e.attributes,function(e,t){t&&o.children.push(t)}]),{parent:o}},{parent:{children:e}})}function Ke(i,e,s){var o=this;ke(e,function(e){if(!e)return!1;var t,r=e.name,n=C(r);Le(u,r)&&i.tagName.toLowerCase()!==a?t=Object.create(Be).init(i,o,r,e.value):Ae.hasExpr(e.value)&&(t={dom:i,expr:e.value,attr:r,bool:n}),s(e,t)})}var We=/<yield\b/i,Je=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,Qe=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,Xe=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,Ye={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},et=N&&N<10?/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,tt="div",rt="svg";function nt(e,t,r){var n=e&&e.match(/^\s*<([-\w]+)/),i=n&&n[1].toLowerCase(),s=U(r?rt:tt);return e=function(e,r){if(!We.test(e))return e;var n={};return r=r&&r.replace(Qe,function(e,t,r){return n[t]=n[t]||r,""}).trim(),e.replace(Xe,function(e,t,r){return n[t]||r||""}).replace(Je,function(e,t){return r||t||""})}(e,t),et.test(i)?s=function(e,t,r){var n="o"===r[0],i=n?"select>":"table>";if(e.innerHTML="<"+i+t.trim()+"</"+i,i=e.firstChild,n)i.selectedIndex=-1;else{var s=Ye[r];s&&1===i.childElementCount&&(i=P(s,i))}return i}(s,e,i):V(s,e),s}function it(e,t){var r=this,n=r.name,i=r.tmpl,s=r.css,o=r.attrs,a=r.onCreate;return p[n]||(st(n,i,s,o,a),p[n].class=this.constructor),St(e,n,t,this),s&&ae.inject(),this}function st(e,t,r,n,i){return S(n)&&(i=n,/^[\w-]+\s?=/.test(r)?(n=r,r=""):n=""),r&&(S(r)?i=r:ae.add(r)),e=e.toLowerCase(),p[e]={name:e,tmpl:t,attrs:n,fn:i},e}function ot(e,t,r,n,i){return r&&ae.add(r,e),p[e]={name:e,tmpl:t,attrs:n,fn:i},e}function at(e,i,s){var t,r,o=[];if(ae.inject(),T(i)&&(s=i,i=0),t=L(e)?(e="*"===e?r=Lt():e+Lt(e.split(/, */)))?$(e):[]:e,"*"===i){if(i=r||Lt(),t.tagName)t=$(i,t);else{var n=[];ke(t,function(e){return n.push($(i,e))}),t=n}i=0}return function e(t){if(t.tagName){var r,n=Z(t,f);i&&n!==i&&G(t,f,n=i),(r=St(t,n||t.tagName.toLowerCase(),s))&&o.push(r)}else t.length&&ke(t,e)}(t),o}var ut={},ct=ut[b]={},lt=0;function pt(e,t,r){if(T(e))pt("__"+lt+++"__",e,!0);else{var n=r?ct:ut;if(!t){if(k(n[e]))throw new Error("Unregistered mixin: "+e);return n[e]}n[e]=S(t)?$e(t.prototype,n[e]||{})&&t:$e(n[e]||{},t)}}function ft(){return ke(y,function(e){return e.update()})}function ht(e){p[e]=null}var dt=Object.freeze({Tag:it,tag:st,tag2:ot,mount:at,mixin:pt,update:ft,unregister:ht,version:"WIP"}),gt=0;function mt(e,t,r,n,i){if(!e||!r){var s=!r&&e?this:t||this;ke(i,function(e){e.expr&&Ue.call(s,[e.expr]),n[Ie(e.name).replace(_,"")]=e.expr?e.expr.value:e.value})}}function vt(e){var t=this.__.isAnonymous;Me(this,"isMounted",e),t||(e?this.trigger("mount"):(this.trigger("unmount"),this.off("*"),this.__.wasCreated=!1))}function xt(o,e,t){void 0===o&&(o={}),void 0===e&&(e={});var i,a=$e({},e.opts),u=e.parent,s=e.isLoop,c=!!e.isAnonymous,l=Fe.skipAnonymousTags&&c,p=e.item,r=e.index,f=[],h=[],d=[],g=e.root,m=e.tagName||Et(g),v="virtual"===m,x=!v&&!o.tmpl,n=[];l||Te(this),o.name&&g._tag&&g._tag.unmount(!0),Me(this,"isMounted",!1),Me(this,"__",{isAnonymous:c,instAttrs:f,innerHTML:t,tagName:m,index:r,isLoop:s,isInline:x,listeners:[],virts:[],wasCreated:!1,tail:null,head:null,parent:null,item:null}),Me(this,"_riot_id",++gt),Me(this,"root",g),$e(this,{opts:a},p),Me(this,"parent",u||null),Me(this,"tags",{}),Me(this,"refs",{}),i=x||s&&c?g:(v||(g.innerHTML=""),nt(o.tmpl,t,z(g))),Me(this,"update",function(e){var t={},r=this.isMounted&&!l;return $e(this,e),mt.apply(this,[s,u,c,t,f]),r&&this.isMounted&&S(this.shouldUpdate)&&!this.shouldUpdate(e,t)||(s&&c&&bt.apply(this,[this.parent,n]),$e(a,t),r&&this.trigger("update",e),Ue.call(this,d),r&&this.trigger("updated")),this}.bind(this)),Me(this,"mixin",function(){var o=this;return ke(arguments,function(e){var n,t,r=[],i=["init","__proto__"];e=L(e)?pt(e):e,n=S(e)?new e:e;for(var s=Object.getPrototypeOf(n);r=r.concat(Object.getOwnPropertyNames(t||n)),t=Object.getPrototypeOf(t||n););ke(r,function(e){if(!Le(i,e)){var t=Object.getOwnPropertyDescriptor(n,e)||Object.getOwnPropertyDescriptor(s,e),r=t&&(t.get||t.set);!o.hasOwnProperty(e)&&r?Object.defineProperty(o,e,t):o[e]=S(n[e])?n[e].bind(o):n[e]}}),n.init&&n.init.bind(o)(a)}),this}.bind(this)),Me(this,"mount",function(){var r=this;g._tag=this,Ke.apply(u,[g,g.attributes,function(e,t){!c&&Be.isPrototypeOf(t)&&(t.tag=r),e.expr=t,f.push(e)}]),h=[],W(o.attrs,function(e,t){h.push({name:e,value:t})}),Ke.apply(this,[g,h,function(e,t){t?d.push(t):G(g,e.name,e.value)}]),mt.apply(this,[s,u,c,a,f]);var e=pt(b);if(e&&!l)for(var t in e)e.hasOwnProperty(t)&&r.mixin(e[t]);if(o.fn&&o.fn.call(this,a),l||this.trigger("before-mount"),Ge.apply(this,[i,d,c]),this.update(p),!c&&!x)for(;i.firstChild;)g.appendChild(i.firstChild);if(Me(this,"root",g),!l&&this.parent){var n=Ot(this.parent);n.one(n.isMounted?"updated":"mount",function(){vt.call(r,!0)})}else vt.call(this,!0);return this.__.wasCreated=!0,this}.bind(this)),Me(this,"unmount",function(e){var t,r=this,n=this.root,i=n.parentNode,s=y.indexOf(this);return l||this.trigger("before-unmount"),W(o.attrs,function(e){Re(e,_)&&(e=e.slice(_.length)),q(g,e)}),this.__.listeners.forEach(function(t){Object.keys(t[w]).forEach(function(e){t.removeEventListener(e,t[w][e])})}),-1!==s&&y.splice(s,1),(i||v)&&(u?(t=Ot(u),v?Object.keys(this.tags).forEach(function(e){Ct(t.tags,e,r.tags[e])}):(Ct(t.tags,m,this),u!==t&&Ct(u.tags,m,this))):V(n,""),i&&!e&&i.removeChild(n)),this.__.virts&&ke(this.__.virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),jt(d),ke(f,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()}),this.__.onUnmount&&this.__.onUnmount(),this.isMounted||vt.call(this,!0),vt.call(this,!1),delete this.root._tag,this}.bind(this))}function yt(e){return e.tagName&&p[Z(e,f)||Z(e,f)||e.tagName.toLowerCase()]}function bt(r,n){var i=this;ke(Object.keys(r),function(e){var t=Le(n,e);(k(i[e])||t)&&(t||n.push(e),i[e]=r[e])})}function _t(e,t){var r,n=this.parent;n&&(R(r=n.tags[e])?r.splice(t,0,r.splice(r.indexOf(this),1)[0]):Nt(n.tags,e,this))}function wt(e,t,r,n){var i=new xt(e,t,r),s=t.tagName||Et(t.root,!0),o=Ot(n);return Me(i,"parent",o),i.__.parent=n,Nt(o.tags,s,i),o!==n&&Nt(n.tags,s,i),i}function Ot(e){for(var t=e;t.__.isAnonymous&&t.parent;)t=t.parent;return t}function jt(e){ke(e,function(e){e instanceof xt?e.unmount(!0):e.tagName?e.tag.unmount(!0):e.unmount&&e.unmount()})}function Et(e,t){var r=yt(e),n=!t&&Z(e,f);return n&&!Ae.hasExpr(n)?n:r?r.name:e.tagName.toLowerCase()}function Nt(e,t,r,n,i){var s=e[t],o=R(s),a=!k(i);if(!s||s!==r)if(!s&&n)e[t]=[r];else if(s)if(o){var u=s.indexOf(r);if(u===i)return;-1!==u&&s.splice(u,1),a?s.splice(i,0,r):s.push(r)}else e[t]=[s,r];else e[t]=r}function Ct(e,t,r,n){if(R(e[t])){var i=e[t].indexOf(r);-1!==i&&e[t].splice(i,1),e[t].length?1!==e[t].length||n||(e[t]=e[t][0]):delete e[t]}else delete e[t]}function St(e,t,r,n){var i=p[t],s=p[t].class,o=n||(s?Object.create(s.prototype):{}),a=e._innerHTML=e._innerHTML||e.innerHTML,u=$e({root:e,opts:r},{parent:r?r.parent:null});return i&&e&&xt.apply(o,[i,u,a]),o&&o.mount&&(o.mount(!0),Le(y,o)||y.push(o)),o}function At(e,t){var r=F();Tt.call(e,r),t.parentNode.replaceChild(r,t)}function Tt(e,t){var r,n,i=H(),s=H(),o=F();for(this.root.insertBefore(i,this.root.firstChild),this.root.appendChild(s),this.__.head=n=i,this.__.tail=s;n;)r=n.nextSibling,o.appendChild(n),this.__.virts.push(n),n=r;t?e.insertBefore(o,t.__.head):e.appendChild(o)}function kt(e,t){for(var r,n=this.__.head,i=F();n;)if(r=n.nextSibling,i.appendChild(n),(n=r)===this.__.tail){i.appendChild(n),e.insertBefore(i,t.__.head);break}}function Lt(e){if(e)return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,t){var r=t.trim().toLowerCase();return e+",["+f+'="'+r+'"]'},"");var t=Object.keys(p);return t+Lt(t)}var It=Object.freeze({getTag:yt,inheritFrom:bt,moveChildTag:_t,initChildTag:wt,getImmediateCustomParentTag:Ot,unmountAll:jt,getTagName:Et,arrayishAdd:Nt,arrayishRemove:Ct,mountTo:St,makeReplaceVirtual:At,makeVirtual:Tt,moveVirtual:kt,selectTags:Lt}),Rt=Fe,Mt={tmpl:Ae,brackets:Oe,styleManager:ae,vdom:y,styleNode:ae.styleNode,dom:Y,check:e,misc:Pe,tags:It},$t=it,Pt=st,Ft=ot,Ht=at,zt=pt,Ut=ft,Vt=ht,Bt=Te,qt=$e({},dt,{observable:Te,settings:Rt,util:Mt}),Dt=Object.freeze({settings:Rt,util:Mt,Tag:$t,tag:Pt,tag2:Ft,mount:Ht,mixin:zt,update:Ut,unregister:Vt,version:"WIP",observable:Bt,default:qt});function Zt(e){var t=arguments,r=e.source,n=e.global?"g":"";e.ignoreCase&&(n+="i"),e.multiline&&(n+="m");for(var i=1;i<arguments.length;i++)r=r.replace("@","\\"+t[i]);return new RegExp(r,n)}var Gt,Kt,Wt=(Gt=window||global,(Kt={}).html={jade:function(e,t,r){return console.log('DEPRECATION WARNING: jade was renamed "pug" - The jade parser will be removed in riot@3.0.0!'),Xt("jade",e,t,r)},pug:function(e,t,r){return Xt("pug",e,t,r)}},Kt.css={less:function(e,t,r,n){var i;return r=Qt({sync:!0,syncImport:!0,filename:n},r),Jt("less").render(t,r,function(e,t){if(e)throw e;i=t.css}),i}},Kt.js={es6:function(e,t,r){return Jt("Babel").transform(e,Qt({plugins:[["transform-es2015-template-literals",{loose:!0}],"transform-es2015-literals","transform-es2015-function-name","transform-es2015-arrow-functions","transform-es2015-block-scoped-functions",["transform-es2015-classes",{loose:!0}],"transform-es2015-object-super","transform-es2015-shorthand-properties","transform-es2015-duplicate-keys",["transform-es2015-computed-properties",{loose:!0}],["transform-es2015-for-of",{loose:!0}],"transform-es2015-sticky-regex","transform-es2015-unicode-regex","check-es2015-constants",["transform-es2015-spread",{loose:!0}],"transform-es2015-parameters",["transform-es2015-destructuring",{loose:!0}],"transform-es2015-block-scoping","transform-es2015-typeof-symbol",["transform-es2015-modules-commonjs",{allowTopLevelThis:!0}],["transform-regenerator",{async:!1,asyncGenerators:!1}]]},t)).code},buble:function(e,t,r){return t=Qt({source:r,modules:!1},t),Jt("buble").transform(e,t).code},coffee:function(e,t){return Jt("CoffeeScript").compile(e,Qt({bare:!0},t))},livescript:function(e,t){return Jt("livescript").compile(e,Qt({bare:!0,header:!1},t))},typescript:function(e,t){return Jt("typescript")(e,t)},none:function(e){return e}},Kt.js.javascript=Kt.js.none,Kt.js.coffeescript=Kt.js.coffee,Kt._req=function(e){var t=e.split(".");if(2!==t.length)throw new Error("Bad format for parsers._req");var r=Kt[t[0]][t[1]];if(r)return r;throw new Error('Parser "'+e+'" not found.')},Kt.utils={extend:Qt},Kt);function Jt(e){var t=Gt[e];if(t)return t;throw new Error('Parser "'+e+'" not loaded.')}function Qt(e,t){if(t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function Xt(e,t,r,n){return r=Qt({pretty:!0,filename:n,doctype:"html"},r),Jt(e).render(t,r)}var Yt=/'[^'\n\r\\]*(?:\\(?:\r\n?|[\S\s])[^'\n\r\\]*)*'/.source,er=[/\/\*[^*]*\*+(?:[^*/][^*]*\*+)*\//.source,"//.*",Yt,Yt.replace(/'/g,'"'),"([/`])"].join("|"),tr=er.slice(0,-2)+"{}])";function rr(e,t,r){var n=/[`$\\]/g;for(n.lastIndex=t;n.exec(e);){var i=n.lastIndex,s=e[i-1];if("`"===s)return i;if("$"===s&&"{"===e[i])return r.push("`","}"),i+1;n.lastIndex++}throw new Error("Unclosed ES6 template")}var nr=Wt.utils.extend,ir=/"[^"\n\\]*(?:\\[\S\s][^"\n\\]*)*"|'[^'\n\\]*(?:\\[\S\s][^'\n\\]*)*'/.source,sr=Oe.R_STRINGS.source,or=/ *([-\w:\xA0-\xFF]+) ?(?:= ?('[^']*'|"[^"]*"|\S+))?/g,ar=RegExp(/<!--(?!>)[\S\s]*?-->/.source+"|"+ir,"g"),ur=/<(-?[A-Za-z][-\w\xA0-\xFF]*)(?:\s+([^"'/>]*(?:(?:"[^"]*"|'[^']*'|\/[^>])[^'"/>]*)*)|\s*)(\/?)>/g,cr=/>[ \t]+<(-?[A-Za-z]|\/[-A-Za-z])/g,lr=["style","src","d","value"],pr=/^(?:input|img|br|wbr|hr|area|base|col|embed|keygen|link|meta|param|source|track)$/,fr=/<pre(?:\s+(?:[^">]*|"[^"]*")*)?>([\S\s]+?)<\/pre\s*>/gi,hr=/^"(?:number|date(?:time)?|time|month|email|color)\b/i,dr=/^\s*import(?!\w|(\s)?\()(?:(?:\s|[^\s'"])*)['|"].*\n?/gm,gr=/[ \t]+$/gm,mr=Zt(/@#\d/,"x01"),vr=Zt(/@#(\d+)/g,"x01"),xr="#",yr="⁗",br='"',_r="'";function wr(e){var t,r=ar;for(1!==e.indexOf("\r")&&(e=e.replace(/\r\n?/g,"\n")),r.lastIndex=0;t=r.exec(e);)"<"===t[0][0]&&(e=RegExp.leftContext+RegExp.rightContext,r.lastIndex=t[3]+1);return e}function Or(e,t){var r,n,i,s=[];for(or.lastIndex=0,e=e.replace(/\s+/g," ");r=or.exec(e);){var o=r[1].toLowerCase(),a=r[2];a?(a[0]!==br&&(a=br+(a[0]===_r?a.slice(1,-1):a)+br),"type"===o&&hr.test(a)?n=a:(mr.test(a)&&("value"===o&&(i=1),-1!==lr.indexOf(o)&&(o="riot-"+o)),s.push(o+"="+a))):s.push(o)}return n&&(i&&(n=br+t._bp[0]+_r+n.slice(1,-1)+_r+t._bp[1]+br),s.push("type="+n)),s.join(" ")}function jr(e,t,r){var n=r._bp;if(e&&n[4].test(e)){for(var i,s=t.expr&&(t.parser||t.type)?Ar:0,o=Oe.split(e,0,n),a=1;a<o.length;a+=2)"^"===(i=o[a])[0]?i=i.slice(1):s&&";"===(i=s(i,t).trim()).slice(-1)&&(i=i.slice(0,-1)),o[a]=xr+(r.push(i)-1)+n[1];e=o.join("")}return e}function Er(e,r){return r.length&&(e=e.replace(vr,function(e,t){return r._bp[0]+r[t].trim().replace(/[\r\n]+/g," ").replace(/"/g,yr)})),e}function Nr(e,t,i){if(!/\S/.test(e))return"";if(e=jr(e,t,i).replace(ur,function(e,t,r,n){return t=t.toLowerCase(),n=n&&!pr.test(t)?"></"+t:"",r&&(t+=" "+Or(r,i)),"<"+t+n+">"}),!t.whitespace){var r=[];/<pre[\s>]/.test(e)&&(e=e.replace(fr,function(e){return r.push(e),""})),e=e.trim().replace(/\s+/g," "),r.length&&(e=e.replace(/\u0002/g,function(){return r.shift()}))}return t.compact&&(e=e.replace(cr,"><$1")),Er(e,i).replace(gr,"")}var Cr=/^[ \t]*(((?:async|\*)\s*)?([$_A-Za-z][$\w]*))\s*\([^()]*\)\s*{/m;function Sr(e){var t,r,n,i,s,o,a=[],u=RegExp,c=function(e,t){for(var r,n,i,s,o,a,u=new RegExp(er,"g"),c=Oe.skipRegex,l=0|t,p=[[]],f=[],h=u,d=h.lastIndex=l;a=h.exec(e);){if(s=a.index,o=h.lastIndex,n="",i=a[1]){if("{"===i)f.push("}");else if("}"===i){if(f.pop()!==i)throw new Error("Unexpected '}'");"`"===f[f.length-1]&&(i=f.pop())}else"/"===i&&s+1<(o=c(e,s))&&(n=e.slice(s,o));"`"===i&&(o=rr(e,o,f),n=e.slice(s,o),h=f.length?r=r||new RegExp(tr,"g"):u)}else"/"===(n=a[0])[0]?(n="*"===n[1]?" ":"",e=e.slice(l,s)+n+e.slice(o),o=s+n.length,n=""):2===n.length&&(n="");n&&(p[0].push(e.slice(d,s)),p.push(n),d=o),h.lastIndex=o}return p[0].push(e.slice(d)),p}(e);for(e=c.shift().join("<%>");t=e.match(Cr);)a.push(u.leftContext),n=l(e=u.rightContext),i=t[1],s=t[2]||"",o=t[3],o=(r=!/^(?:if|while|for|switch|catch|function)$/.test(o))?t[0].replace(i,"this."+o+" ="+s+" function"):t[0],a.push(o,e.slice(0,n)),e=e.slice(n),r&&!/^\s*.\s*bind\b/.test(e)&&a.push(".bind(this)");return a.length&&(e=a.join("")+e),c.length&&(e=e.replace(/<%>/g,function(){return c.shift()})),e;function l(e){for(var t=/[{}]/g,r=1;r&&t.exec(e);)"{"===e[t.lastIndex-1]?++r:--r;return r?e.length:t.lastIndex}}function Ar(e,t,r,n,i){return/\S/.test(e)?(r=r||t.type,(t.parser||r&&Wt._req("js."+r,!0)||Sr)(e,n,i).replace(/\r\n?/g,"\n").replace(gr,"")):""}var Tr=RegExp("([{}]|^)[; ]*((?:[^@ ;{}][^{}]*)?[^@ ;{}:] ?)(?={)|"+ir,"g");function kr(e,t,r,n){n=n||{},!r||"css"!==r&&(e=Wt._req("css."+r,!0)(t,e,n.parserOpts||{},n.url));return e=e.replace(Oe.R_MLCOMMS,"").replace(/\s+/g," ").trim(),!t||n.parserOpts&&!n.parserOpts.prefixCSS||(e=function(n,e){var i=":scope",s=["from","to",":host"];return e.replace(Tr,function(e,t,r){return r?(r=r.replace(/[^,]+/g,function(e){var t=e.trim();return 0===t.indexOf(n)?e:!t||-1<s.indexOf(t)||"%"===t.slice(-1)?e:t=t.indexOf(i)<0?n+" "+t+',[data-is="'+n+'"] '+t:t.replace(i,n)+","+t.replace(i,'[data-is="'+n+'"]')}),t?t+" "+r:r):e})}(t,e)),e}var Lr=/\stype\s*=\s*(?:(['"])(.+?)\1|(\S+))/i,Ir="\\s*=\\s*("+sr+"|{[^}]+}|\\S+)",Rr=/\/>\n|^<(?:\/?-?[A-Za-z][-\w\xA0-\xFF]*\s*|-?[A-Za-z][-\w\xA0-\xFF]*\s+[-\w:\xA0-\xFF][\S\s]*?)>\n/;function Mr(e,t){return e?(e=_r+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+_r,t&&-1!==e.indexOf("\n")?e.replace(/\n/g,"\\n"):e):"''"}function $r(e){if(e){var t=e.match(Lr);if(t=t&&(t[2]||t[3]))return t.replace("text/","")}return""}function Pr(e,t){if(e){var r=e.match(RegExp("\\s"+t+Ir,"i"));if(r=r&&r[1])return/^['"]/.test(r)?r.slice(1,-1):r}return""}function Fr(e){var t=function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}(Pr(e,"options"));return t?JSON.parse(t):null}var Hr=RegExp(/^([ \t]*)<(-?[A-Za-z][-\w\xA0-\xFF]*)(?:\s+([^'"/>]+(?:(?:@|\/[^>])[^'"/>]*)*)|\s*)?(?:\/>|>[ \t]*\n?([\S\s]*)^\1<\/\2\s*>|>(.*)<\/\2\s*>)/.source.replace("@",sr),"gim"),zr=/<script(\s+[^>]*)?>\n?([\S\s]*?)<\/script\s*>/gi,Ur=/<style(\s+[^>]*)?>\n?([\S\s]*?)<\/style\s*>/gi;var Vr,Br,qr={compile:function(e,f,h){var d,g=[],t=e;(f=f||{}).parserOptions=nr({template:{},js:{},style:{prefixCSS:!0}},f.parserOptions||{}),d=f.exclude?function(e){return f.exclude.indexOf(e)<0}:function(){return 1},h=h||"";var m=Oe.array(f.brackets);return f.template&&(t=function(e,t,r,n){return Wt._req("html."+r,!0)(e,n,t)}(t,h,f.template,f.parserOptions.template)),t=wr(t).replace(Hr,function(e,t,n,r,i,s){var o="",a="",u="",c="",l=[];if(l._bp=m,n=n.toLowerCase(),r=r&&d("attribs")?Er(Or(jr(r,f,l),l),l):"",(i=i||s)&&/\S/.test(i))if(s)d("html")&&(u=Nr(s,f,l));else{var p=function(e){if(/<[-\w]/.test(e))for(var t,r=e.lastIndexOf("<"),n=e.length;-1!==r;){if(t=e.slice(r,n).match(Rr))return r+=t.index+t[0].length,"<-/>\n"===(t=e.slice(0,r)).slice(-5)&&(t=t.slice(0,-5)),[t,e.slice(r)];n=r,r=e.lastIndexOf("<",r-1)}return["",e]}((i=(i=(i=i.replace(RegExp("^"+t,"gm"),"")).replace(zr,function(e,t,r){if(d("js")){var n=function(e,t,r,n){var i=$r(r),s=Pr(r,"src"),o=nr({},t.parserOptions.js);return!s&&Ar(e,t,i,nr(o,Fr(r)),n)}(r,f,t,h);n&&(o+=(o?"\n":"")+n)}return""})).replace(Ur,function(e,t,r){return d("css")&&(a+=(a?" ":"")+function(e,t,r,n,i){var s=nr({},t.parserOptions.style),o={parserOpts:nr(s,Fr(r)),url:n};return kr(e,i,$r(r)||t.style,o)}(r,f,t,h,n)),""})).replace(gr,""));d("html")&&(u=Nr(p[0],f,l)),d("js")&&((i=Ar(p[1],f,null,null,h))&&(o+=(o?"\n":"")+i),o=o.replace(dr,function(e){return c+=e.trim()+"\n",""}))}return o=/\S/.test(o)?o.replace(/\n{3,}/g,"\n\n"):"",f.entities?(g.push({tagName:n,html:u,css:a,attribs:r,js:o,imports:c}),""):function(e,t,r,n,i,s,o){var a=o.debug?",\n  ":", ",u="});";return i&&"\n"!==i.slice(-1)&&(u="\n"+u),s+"riot.tag2('"+e+_r+a+Mr(t,1)+a+Mr(r)+a+Mr(n)+", function(opts) {\n"+i+u}(n,u,a,r,o,c,f)}),f.entities?g:t},compileHTML:function(e,t,r){return t=Array.isArray(t)?(r=t,{}):(r=r||[],t||{}),r._bp=Oe.array(t.brackets),Nr(wr(e),t,r)},compileCSS:function(e,t,r){return t&&"object"==typeof t?(r=t,t=""):r=r||{},kr(e,r.tagName,t,r)},compileJS:function(e,t,r,n){return"string"==typeof t&&(n=r,r=t,t={}),r&&"object"==typeof r&&(n=r,r=""),Ar(e,t||{},r,(n=n||{}).parserOptions,n.url)},parsers:Wt,version:"v3.6.0"};function Dr(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&(200===n.status||!n.status&&n.responseText.length)&&t(n.responseText,r,e)},n.open("GET",e,!0),n.send("")}function Zr(e,t){if(typeof e===o){var r=U("script"),n=document.documentElement;t&&(e+="\n//# sourceURL="+t+".js"),r.text=e,n.appendChild(r),n.removeChild(r)}}function Gr(e,i,t){if(typeof e===o){if(T(i)&&(t=i,i=!1),/^\s*</m.test(e)){var r=qr.compile(e,t);return!0!==i&&Zr(r),S(i)&&i(r,e,t),r}Dr(e,function(e,t,r){var n=qr.compile(e,t,r);Zr(n,r),i&&i(n,e,t)},t)}else if(R(e)){var s=e.length;e.forEach(function(e){Dr(e,function(e,t,r){var n=qr.compile(e,t,r);Zr(n,r),!--s&&i&&i(n,e,t)},t)})}else{if(i=S(e)?(t=i,e):void(t=e),Br)return i&&i();Vr?i&&Vr.on("ready",i):(Vr=Te(),function(e,t){var r=$('script[type="riot/tag"]'),n=r.length;function i(){Vr.trigger("ready"),Br=!0,e&&e()}function s(e,t,r){Zr(qr.compile(e,t,r),r),--n||i()}if(n)for(var o=0;o<r.length;++o){var a=r[o],u=$e({template:Z(a,"template")},t),c=Z(a,"src")||Z(a,"data-src");c?Dr(c,s,u):s(a.innerHTML,u)}else i()}(i,t))}}var Kr=qr.parsers;return $e({},Dt,{mount:function(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];return Gr(function(){e=Ht.apply(Dt,t)}),e},compile:Gr,parsers:Kr})},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.riot=t();